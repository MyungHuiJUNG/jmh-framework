import{u as q}from"./use-quasar.2d4ce40a.js";import f from"./ABtn.e24d7e8a.js";import C from"./ATitleBar.bbf1d9a4.js";import I from"./TicketManageSearch.260e6ac6.js";import S from"./TicketDetail.65846182.js";import B from"./TicketManageTable.f7722919.js";import N from"./NewTicketPopup.b1515653.js";import{u as P}from"./permissionStore.29c18612.js";import{s as $}from"./dialog.88ce899f.js";import{F as v}from"./FlowRoleCode.12cdb02e.js";import{r as a,g as k,o as r,Y as A,z as l,a as m,c as n,Z as c}from"./index.02f7c95d.js";/* empty css                                                             */import"./_plugin-vue_export-helper.cdc0426e.js";import"./ClosePopup.daa62b28.js";import"./counselTypeStore.5faa86f9.js";import"./axios.816e1a60.js";import"./header.10137493.js";import"./errorHandler.5efe1eb1.js";import"./authStore.fadf8446.js";import"./counsel-hub.145170b4.js";import"./codeStore.e69f9e04.js";import"./ASelect.a02a29e0.js";import"./QItem.1bce08e7.js";import"./QSelect.b17c746f.js";import"./QMenu.3c9cf304.js";import"./position-engine.53490cc8.js";import"./rtl.276c3f1b.js";import"./format.2cae61da.js";import"./AInput.398f059b.js";import"./ACheckbox.923db872.js";import"./UserPopup.4dc2e487.js";import"./TabulatorGrid.9c80b09d.js";import"./use-dialog-plugin-component.234e0905.js";import"./organizationStore.a86bd6ff.js";import"./userApi.abe7b8c8.js";import"./ALoadingSpinner.ca275fb8.js";import"./ticketApi.d3774daa.js";import"./FlowSystemCode.7be7ce49.js";import"./QBadge.c1f4e948.js";import"./QTooltip.86ca1c0e.js";import"./QList.4c243fc6.js";import"./lodash.33ed51ec.js";import"./_commonjsHelpers.c10bf6cb.js";import"./ATextarea.94103f28.js";/* empty css                                                                  */import"./TicketHistory.7aa32e96.js";import"./commandStore.9ed00edb.js";import"./scriptApi.ab757ee5.js";import"./permissionApi.ffe0b82d.js";import"./CommonPopup.2b0ee10b.js";const L={class:"column no-wrap fit a-border q-pa-xs",style:{"min-height":"865px"}},O={class:"col-auto q-mb-xs"},V={class:"row col no-wrap a-border q-pa-xs"},F={class:"col column no-wrap"},H={class:"text-right bg-grey-5 a-border q-pa-xs col-auto"},Vt={__name:"TicketManage",setup(K){const _=q(),p=P(),u=a(null),o=a(!1),e=a(null),i=a(),h=k(()=>p.hasPermission(v.TICKET_ROLE.DELETE)),D=k(()=>p.hasPermission(v.TICKET_ROLE.ADD)),d=a(!1);function T(t){i.value=t[0],u.value=t[0],o.value=!0}function w(){i.value=null,o.value=!1}function R(){_.dialog({component:N}).onOk(()=>{e.value.loadInitialData(),e.value.setData()})}function g(){var t;(t=i.value)!=null&&t.entityId?e.value.deleteTicket(i.value.entityId):$("\uC0AD\uC81C\uD560 \uD2F0\uCF13\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.")}function x(){e.value.loadInitialData(),e.value.setData()}function b(t){e.value.searchTickets(t)}function y(t){d.value=t}return(t,s)=>(r(),A("div",L,[l("div",O,[m(I,{onSearch:b,"has-datas":d.value},null,8,["has-datas"])]),l("div",V,[l("div",F,[m(C,{title:"\uD2F0\uCF13 \uBAA9\uB85D",class:"col-auto full-width q-mb-xs"}),m(B,{onRowSelected:T,onRowDeselected:w,onRowDeleted:s[0]||(s[0]=E=>o.value=!1),ref_key:"grid",ref:e,class:"col",onHasDatas:y},null,512),l("div",H,[h.value?(r(),n(f,{key:0,label:"\uC0AD\uC81C",onClick:g})):c("",!0),D.value?(r(),n(f,{key:1,label:"\uB4F1\uB85D",class:"q-ml-xs",onClick:R})):c("",!0)])]),o.value?(r(),n(S,{key:0,"ticket-detail":u.value,onClose:s[1]||(s[1]=E=>o.value=!1),onUpdate:x,class:"col-auto"},null,8,["ticket-detail"])):c("",!0)])]))}};export{Vt as default};
