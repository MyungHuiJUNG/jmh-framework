import{o as a,Y as l,z as e,ab as p,az as y,Z as v,a1 as u,a as x,E as f,c as h}from"./index.02f7c95d.js";import{api as i}from"./axios.816e1a60.js";import{g as b}from"./header.10137493.js";import"./CommonPopup.2b0ee10b.js";import{h as S}from"./errorHandler.5efe1eb1.js";import{_ as C}from"./_plugin-vue_export-helper.cdc0426e.js";const g={...b()},U={...b(),"Content-Type":"multipart/form-data"},$=(t,d,m)=>i.post(`/rest/api/v1/file/files/${t}/${d}/upload`,m,U),B=t=>i.get(`/rest/api/v1/file/files/${t}`,g),L=t=>i.get(`/rest/api/v1/file/files/${t}/download`,{...b(),responseType:"blob"}),M=t=>i.delete(`/rest/api/v1/file/files/${t}`,g),T=t=>{const d={entityIds:t};return i.delete("/rest/api/v1/file/files",{params:d,...b()})},j={uploadFile:$,getFileDetail:B,downloadFile:L,removeFile:M,removeFiles:T};const E={class:"file-table"},O={key:0,class:"body-border-bottom"},A={class:"text-center no-wrap body-border-bottom"},D={class:"body-border-bottom"},I={class:"text-center no-wrap body-border-bottom"},N={class:"text-center no-wrap body-border-bottom"},R={class:"text-center no-wrap body-border-bottom"},z={class:"body-border-bottom"},V={class:"text-center no-wrap body-border-bottom"},H={__name:"FileUploadManage",props:{filesFromServer:{type:Array,default(){return[]}},tempLocalFiles:{type:Array,default(){return[]}},isModify:{type:Boolean},resourceType:{type:String}},emits:["removeFile","removeServerFile"],setup(t,{emit:d}){const m=d;async function _(s){try{const n=(await j.downloadFile(s.entityId)).data,o=document.createElement("a"),c=URL.createObjectURL(n);o.href=c,o.download=s.fileName,document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(c)}catch(r){S(r)}}function w(s){m("removeFile",s)}function k(s,r){m("removeServerFile",s,r)}function F(s){if(!s)return null;const r=s.lastIndexOf("."),n=r!==-1?s.slice(r):"",o=r!==-1?s.slice(0,r):s;return(o.length>15?o.slice(0,15)+"...":o)+n}return(s,r)=>(a(),l("table",E,[r[2]||(r[2]=e("colgroup",null,[e("col",{width:"6%",class:"first-td"}),e("col",{width:"70%",class:"second-td"}),e("col",{width:"12%",class:"third-td"}),e("col",{width:"12%",class:"fourth-td"})],-1)),e("tbody",null,[r[1]||(r[1]=e("tr",null,[e("td",{class:"text-center"},"#"),e("td",{class:"text-center"},"\uD30C\uC77C\uBA85"),e("td",{class:"text-center"},"\uB2E4\uC6B4\uB85C\uB4DC"),e("td",{class:"text-center"},"\uC0AD\uC81C")],-1)),t.filesFromServer.length===0&&t.tempLocalFiles.length===0?(a(),l("tr",O,[(a(),l(p,null,y(4,n=>e("td",{key:n,class:"text-center no-wrap body-border-bottom"})),64))])):v("",!0),(a(!0),l(p,null,y(t.filesFromServer,(n,o)=>(a(),l("tr",{key:o},[e("td",A,u(o+1),1),e("td",D,u(F(n==null?void 0:n.fileName)),1),e("td",I,[x(f,{class:"notice-btn",icon:"download",color:"primary",dense:"",unelevated:"",onClick:c=>_(n)},null,8,["onClick"])]),e("td",N,[t.resourceType==="Board"&&!t.isModify?v("",!0):(a(),h(f,{key:0,class:"notice-btn",icon:"delete",color:"primary",dense:"",unelevated:"",onClick:c=>k(n,o)},null,8,["onClick"]))])]))),128)),(a(!0),l(p,null,y(t.tempLocalFiles,(n,o)=>(a(),l("tr",{key:o},[e("td",R,u(o+1+t.filesFromServer.length),1),e("td",z,u(F(n==null?void 0:n.name)),1),r[0]||(r[0]=e("td",{class:"text-center no-wrap body-border-bottom"},null,-1)),e("td",V,[t.resourceType==="Board"&&!t.isModify?v("",!0):(a(),h(f,{key:0,class:"notice-btn",icon:"delete",color:"primary",dense:"",unelevated:"",onClick:c=>w(o)},null,8,["onClick"]))])]))),128))])]))}},P=C(H,[["__scopeId","data-v-3efe581a"]]),J=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));export{P as F,J as a,j as f};
