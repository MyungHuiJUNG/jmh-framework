import{Q as D}from"./QBadge.c1f4e948.js";import{s as g,a as te}from"./dialog.88ce899f.js";import{u as oe}from"./codeStore.e69f9e04.js";import{u as le}from"./permissionStore.29c18612.js";import T from"./ABtn.e24d7e8a.js";import se from"./ASelect.a02a29e0.js";import x from"./AInput.398f059b.js";import ae from"./ATitleBar.bbf1d9a4.js";import ue from"./ATextarea.94103f28.js";import{c as y}from"./customerInfoApi.4e3b1586.js";import{h as C}from"./errorHandler.5efe1eb1.js";import{F as re}from"./FlowSystemCode.7be7ce49.js";import{F as S}from"./FlowRoleCode.12cdb02e.js";import{_ as ne}from"./_plugin-vue_export-helper.cdc0426e.js";import{g as B,r as a,t as ie,y as de,o as w,Y as me,a as u,z as t,w as M,a0 as m,a1 as h,c as O,Z as R}from"./index.02f7c95d.js";import"./CommonPopup.2b0ee10b.js";import"./use-dialog-plugin-component.234e0905.js";import"./axios.816e1a60.js";import"./permissionApi.ffe0b82d.js";/* empty css                                                             */import"./QItem.1bce08e7.js";import"./QSelect.b17c746f.js";import"./QMenu.3c9cf304.js";import"./position-engine.53490cc8.js";import"./rtl.276c3f1b.js";import"./format.2cae61da.js";import"./ClosePopup.daa62b28.js";/* empty css                                                                  */import"./header.10137493.js";import"./authStore.fadf8446.js";import"./counsel-hub.145170b4.js";const ce={class:"detail q-ml-xs column"},fe={class:"col q-pa-xs b-border column table-container full-width"},ve={class:"col-auto row fixed-height full-width"},pe={class:"col-auto t-column text-left top-border-left justify-center column q-px-xs"},xe={class:"row"},ye={class:"col top-border-right justify-center column q-px-xs"},he={class:"col-auto row fixed-height full-width"},be={class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},Ie={class:"row"},_e={class:"col body-border-right justify-center column q-px-xs"},ge={class:"col-auto row fixed-height full-width"},Ce={class:"col body-border-right justify-center column q-px-xs"},we={class:"col-auto row fixed-height full-width"},qe={class:"col body-border-right justify-center column q-px-xs"},Ne={class:"col-auto row fixed-height full-width"},Ee={class:"col body-border-right justify-center column q-px-xs"},Ve={class:"col-auto row fixed-height full-width"},je={class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},Ue={class:"row"},De={class:"col body-border-right justify-center column q-px-xs"},Te={class:"col row full-width"},Se={class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},Be={class:"col body-border-right justify-center column q-pa-xs"},Me={class:"col-auto row fixed-height full-width"},Oe={class:"col body-border-right justify-center column q-px-xs"},Re={class:"col-auto row fixed-height full-width"},Ae={class:"col body-border-right justify-center column q-px-xs"},ke={class:"col-auto row fixed-height full-width"},Fe={class:"col body-border-right justify-center column q-px-xs"},Pe={class:"col-auto row fixed-height full-width"},$e={class:"col body-border-right justify-center column q-px-xs"},Le={class:"text-right q-mt-xs col-auto full-width bg-grey-5 q-pa-xs"},Ye="\uC5C5\uCCB4 \uC0C1\uC138\uC815\uBCF4",Qe={__name:"CustomerInfoDetail",props:["customerInfoEntityId"],emits:["close","saveCustomerInfo"],setup(z,{expose:Z,emit:G}){const H=re.CODES.CUSTOMER_TYPE,A=oe(),q=le(),r=z,N=G;Z({getCustomerInfo:P});const J=B(()=>q.hasPermission(S.CUSTOMER_INFO_ROLE.SAVE)),k=B(()=>q.hasPermission(S.CUSTOMER_INFO_ROLE.ADD)),K=B(()=>q.hasPermission(S.CUSTOMER_INFO_ROLE.DELETE)),o=a([]),n=a(),i=a(),f=a(),v=a(),p=a(),d=a({name:"\uC120\uD0DD",value:null}),c=a(""),E=a(),V=a(),j=a(),U=a(),F=a([]);function W(){var Y,Q;if(!n.value||!n.value.trim()){g("\uD68C\uC0AC\uBA85\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}if(!i.value||!i.value.trim()){g("\uB300\uD45C\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}if(!d.value||d.value.value===null){g("\uACE0\uAC1D\uC720\uD615\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}const l=i.value.replace(/-/g,""),e=((Y=f.value)==null?void 0:Y.replace(/-/g,""))||"",b=((Q=v.value)==null?void 0:Q.replace(/-/g,""))||"",L={entity:{name:n.value,representativeNumber:l,secondaryNumber:e,thirdNumber:b,managerName:p.value,customerTypeCode:d.value.code,note:c.value}};(r.customerInfoEntityId?y.updateCustomerInfo(r.customerInfoEntityId,L):y.saveCustomerInfo(L)).then(I=>{I.status===200&&g("\uC800\uC7A5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4").then(()=>{y.getCustomerInfo(r.customerInfoEntityId||I.data.entityId).then(_=>{_.status===200&&(o.value=_.data)}).catch(_=>{C(_)}),N("saveCustomerInfo")})}).catch(I=>{C(I)})}function P(){y.getCustomerInfo(r.customerInfoEntityId).then(l=>{l.status===200&&(o.value=l.data,X())}).catch(l=>{C(l)})}function X(){var e;const l=A.codes.get(o.value.customerTypeCode);n.value=o.value.name,i.value=o.value.representativeNumber,f.value=o.value.secondaryNumber,v.value=o.value.thirdNumber,p.value=o.value.managerName,d.value={name:(e=l.name)!=null?e:"",value:o.value.customerTypeCode},c.value=o.value.note,E.value=o.value.createdDate,V.value=o.value.lastModifiedDate,j.value=`${o.value.createdByUserName} [${o.value.createdByUserId}]`,U.value=`${o.value.lastModifiedByUserName} [${o.value.lastModifiedByUserId}]`}function ee(){!r.customerInfoEntityId||te("\uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?").then(l=>{l&&y.deleteCustomerInfo(r.customerInfoEntityId).then(e=>{e.status===200&&(N("saveCustomerInfo"),$())}).catch(e=>{C(e)})})}function $(){n.value="",i.value="",f.value="",v.value="",p.value="",d.value={name:"\uC120\uD0DD",value:null},c.value="",E.value="",V.value="",j.value="",U.value="",o.value={name:"",representativeNumber:"",secondaryNumber:"",thirdNumber:"",managerName:"",customerTypeCode:"",note:"",createdDate:"",lastModifiedDate:"",createdByUserName:"",lastModifiedByUserName:""},N("resetCustomerInfoEntityId")}return ie(()=>r.customerInfoEntityId,l=>{l&&P()}),de(()=>{var l;F.value=[...(l=A.codes.get(H))==null?void 0:l.children]}),(l,e)=>{var b;return w(),me("div",ce,[u(ae,{title:Ye,class:"col-auto full-width"}),t("div",fe,[t("div",ve,[t("div",pe,[t("div",xe,[u(D,{class:"q-pa-none q-mr-xs",color:"grey-2","text-color":"red"},{default:M(()=>e[7]||(e[7]=[m("*")])),_:1}),e[8]||(e[8]=m(" \uD68C\uC0AC\uBA85 "))])]),t("div",ye,[u(x,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),maxlength:"500"},null,8,["modelValue"])])]),t("div",he,[t("div",be,[t("div",Ie,[u(D,{class:"q-pa-none q-mr-xs",color:"grey-2","text-color":"red"},{default:M(()=>e[9]||(e[9]=[m("*")])),_:1}),e[10]||(e[10]=m(" \uB300\uD45C\uBC88\uD638 "))])]),t("div",_e,[u(x,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),maxlength:"50"},null,8,["modelValue"])])]),t("div",ge,[e[11]||(e[11]=t("div",{class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},"\uC804\uD654\uBC88\uD6381",-1)),t("div",Ce,[u(x,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),maxlength:"50"},null,8,["modelValue"])])]),t("div",we,[e[12]||(e[12]=t("div",{class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},"\uC804\uD654\uBC88\uD6382",-1)),t("div",qe,[u(x,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),maxlength:"50"},null,8,["modelValue"])])]),t("div",Ne,[e[13]||(e[13]=t("div",{class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},"\uC5C5\uCCB4\uB2F4\uB2F9\uC790",-1)),t("div",Ee,[u(x,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=s=>p.value=s),maxlength:"500"},null,8,["modelValue"])])]),t("div",Ve,[t("div",je,[t("div",Ue,[u(D,{class:"q-pa-none q-mr-xs",color:"grey-2","text-color":"red"},{default:M(()=>e[14]||(e[14]=[m("*")])),_:1}),e[15]||(e[15]=m(" \uACE0\uAC1D\uC720\uD615 "))])]),t("div",De,[u(se,{options:F.value,"option-label":"name","option-value":"value",modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=s=>d.value=s)},null,8,["options","modelValue"])])]),t("div",Te,[t("div",Se,[e[16]||(e[16]=m(" \uBE44\uACE0")),e[17]||(e[17]=t("br",null,null,-1)),t("span",null,"("+h(((b=c.value)==null?void 0:b.length)||0)+" / 500\uC790)",1)]),t("div",Be,[u(ue,{height:"100%",class:"col",modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=s=>c.value=s),maxlength:"500"},null,8,["modelValue"])])]),t("div",Me,[e[18]||(e[18]=t("div",{class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},"\uB4F1\uB85D\uC77C\uC2DC",-1)),t("div",Oe,h(E.value),1)]),t("div",Re,[e[19]||(e[19]=t("div",{class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},"\uB4F1\uB85D\uC790\uBA85",-1)),t("div",Ae,h(j.value),1)]),t("div",ke,[e[20]||(e[20]=t("div",{class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},"\uBCC0\uACBD\uC77C\uC2DC",-1)),t("div",Fe,h(V.value),1)]),t("div",Pe,[e[21]||(e[21]=t("div",{class:"col-auto t-column text-left body-border-left justify-center column q-px-xs"},"\uBCC0\uACBD\uC790\uBA85",-1)),t("div",$e,h(U.value),1)]),t("div",Le,[k.value?(w(),O(T,{key:0,label:"\uC2E0\uADDC",onClick:$})):R("",!0),r.customerInfoEntityId&&K.value?(w(),O(T,{key:1,label:"\uC0AD\uC81C",onClick:ee,class:"q-ml-xs"})):R("",!0),J.value&&r.customerInfoEntityId||k.value&&!r.customerInfoEntityId?(w(),O(T,{key:2,label:"\uC800\uC7A5",onClick:W,class:"q-ml-xs"})):R("",!0)])])])}}},wt=ne(Qe,[["__scopeId","data-v-92e50da2"]]);export{wt as default};
