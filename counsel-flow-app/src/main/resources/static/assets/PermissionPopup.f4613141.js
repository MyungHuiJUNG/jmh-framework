import{r as s,t as B,y as N,o as Q,c as $,w as f,F as q,a as t,$ as K,z as l,B as U,G as j,Q as E}from"./index.02f7c95d.js";import H from"./AInput.398f059b.js";import p from"./ABtn.e24d7e8a.js";import L from"./TabulatorGrid.9c80b09d.js";import F from"./ATitleBar.bbf1d9a4.js";import G from"./ACheckbox.923db872.js";import{u as P}from"./use-dialog-plugin-component.234e0905.js";import{p as v}from"./permissionApi.ffe0b82d.js";import{h as _}from"./errorHandler.5efe1eb1.js";import M from"./ALoadingSpinner.ca275fb8.js";import{_ as O}from"./_plugin-vue_export-helper.cdc0426e.js";/* empty css                                                             */import"./ClosePopup.daa62b28.js";import"./axios.816e1a60.js";import"./dialog.88ce899f.js";import"./CommonPopup.2b0ee10b.js";import"./authStore.fadf8446.js";import"./header.10137493.js";import"./counsel-hub.145170b4.js";const T={class:"q-pa-xs"},Z={class:"my-table a-border full-width"},J={class:"a-border"},W={class:"row"},X={class:"row q-gutter-xs justify-end"},Y={class:"row q-pa-xs justify-end"},h=100,ee={__name:"PermissionPopup",emits:[...P.emits],setup(ae,{emit:te}){let b="\uAD8C\uD55C \uC120\uD0DD";const g=s(null),{dialogRef:S,onDialogOK:y}=P(),n=s(""),u=s(!1),A=[{title:"#",field:"entityId",hozAlign:"center",headerHozAlign:"center",headerSort:!1,width:"5%"},{title:"\uAD8C\uD55C\uBA85",field:"name",hozAlign:"center",headerHozAlign:"center",headerSort:!1}],c=s([]),o=s(0),m=s(!1),r=s(!1),i=s({page:o.value,size:h}),V=s([]);function k(e){V.value=e}function x(){const e=g.value.getSelectedData();if(Array.isArray(e)&&e.length>0){const a={entityId:e[0].entityId,name:e[0].name};y({payload:a})}}function C(e){const a={entityId:e.entityId,name:e.name};y({payload:a})}function w(){const e={};u.value&&n.value&&(e.permissionName=n.value),R(e)}async function I(){if(!m.value){i.value={...i.value,page:o.value};try{const e=await v.getPermissions(i.value);e.status===200&&(c.value=[...c.value,...e.data.content],m.value=e.data.last,o.value+=1)}catch(e){_(e)}}}function R(e){return o.value=0,i.value={page:o.value,size:h,...e},r.value=!0,v.getPermissions(i.value).then(a=>{a&&a.data&&(c.value=a.data.content,m.value=a.data.last,o.value+=1)}).catch(a=>{_(a)}).finally(()=>{r.value=!1})}function z(){o.value=0,i.value={page:o.value,size:h},r.value=!0,v.getPermissions(i.value).then(e=>{e.status===200&&(c.value=e.data.content,m.value=e.data.last,o.value+=1)}).catch(e=>{_(e)}).finally(()=>{r.value=!1})}function D(){n.value="",u.value=!1}return B(n,e=>{e&&(u.value=!0)}),N(()=>{setTimeout(()=>{z()},100)}),(e,a)=>(Q(),$(q,{ref_key:"dialogRef",ref:S,"no-backdrop-dismiss":"","transition-show":"fade","transition-hide":"fade"},{default:f(()=>[t(E,{class:"dialog-large"},{default:f(()=>[t(F,{title:K(b),close:!0},null,8,["title"]),l("div",T,[l("table",Z,[l("tbody",null,[l("tr",null,[l("td",J,[l("div",W,[t(G,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=d=>u.value=d),label:"\uAD8C\uD55C\uBA85"},null,8,["modelValue"])])]),l("td",null,[t(H,{class:"custom-input",modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=d=>n.value=d),onKeyup:U(w,["enter"])},null,8,["modelValue"])]),l("td",null,[l("div",X,[t(p,{label:"\uC870\uD68C",onClick:w}),t(p,{label:"\uCD08\uAE30\uD654",onClick:D})])])])])]),t(j,null,{default:f(()=>[t(L,{rows:c.value,columns:A,height:"500px",onRowSelected:k,infiniteScroll:I,selectableRows:1,onRowDblClick:C,ref_key:"childRef",ref:g},null,8,["rows"])]),_:1}),l("div",Y,[t(p,{label:"\uC120\uD0DD",onClick:x})])]),t(M,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=d=>r.value=d)},null,8,["modelValue"])]),_:1})]),_:1},512))}},be=O(ee,[["__scopeId","data-v-5056a805"]]);export{be as default};
