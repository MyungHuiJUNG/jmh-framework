import S from"./TabulatorGrid.9c80b09d.js";import T from"./ATitleBar.bbf1d9a4.js";import E from"./StatisticsByUsersSearchBar.c010e37f.js";import{u as v}from"./organizationStore.a86bd6ff.js";import{u as x}from"./permissionStore.29c18612.js";import{s as C}from"./statisticApi.e43184a6.js";import{s as H}from"./dialog.88ce899f.js";import{h as y}from"./errorHandler.5efe1eb1.js";import{F as k}from"./FlowRoleCode.12cdb02e.js";import R from"./ALoadingSpinner.ca275fb8.js";import{r as i,g as B,y as F,o as U,Y as V,z as u,a}from"./index.02f7c95d.js";import"./ClosePopup.daa62b28.js";import"./use-quasar.2d4ce40a.js";import"./ASelect.a02a29e0.js";import"./QItem.1bce08e7.js";import"./QSelect.b17c746f.js";import"./QMenu.3c9cf304.js";import"./position-engine.53490cc8.js";import"./rtl.276c3f1b.js";import"./format.2cae61da.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./AInput.398f059b.js";import"./ABtn.e24d7e8a.js";/* empty css                                                             */import"./ACheckbox.923db872.js";import"./UserPopup.4dc2e487.js";import"./use-dialog-plugin-component.234e0905.js";import"./userApi.abe7b8c8.js";import"./axios.816e1a60.js";import"./header.10137493.js";import"./permissionApi.ffe0b82d.js";import"./CommonPopup.2b0ee10b.js";import"./authStore.fadf8446.js";import"./counsel-hub.145170b4.js";const M={class:"column no-wrap fit a-border q-pa-xs",style:{"min-height":"680px"}},L={class:"col-auto q-mb-xs"},b={class:"col column no-wrap a-border q-pa-xs"},q="\uC0C1\uB2F4\uC0AC\uBCC4 \uD2F0\uCF13\uD1B5\uACC4",wt={__name:"StatisticsByUsers",setup(I){const r=i(!1),s=i(null),l=v(),g=x(),p=B(()=>g.hasPermission(k.STATISTICS_USER_ROLE.READ)),c=i([]),f=[{title:"\uB0A0\uC9DC",field:"fromDate",headerHozAlign:"center",hozAlign:"center",width:200,formatter:function(o){const t=o.getData();return t.fromDate+` ~ ${t.toDate}`}},{title:"\uC870\uC9C1(\uB300)",field:"organizationCodeLarge",headerHozAlign:"center",hozAlign:"center",formatter:function(o){var e,n;const t=o.getValue()||null;return(n=(e=l.organizations.get(t))==null?void 0:e.name)!=null?n:t}},{title:"\uC870\uC9C1(\uC911)",field:"organizationCodeMedium",hozAlign:"center",headerHozAlign:"center",formatter:function(o){var e,n;const t=o.getValue()||null;return(n=(e=l.organizations.get(t))==null?void 0:e.name)!=null?n:t}},{title:"\uC870\uC9C1(\uC18C)",field:"organizationCodeSmall",hozAlign:"center",headerHozAlign:"center",formatter:function(o){var e,n;const t=o.getValue()||null;return(n=(e=l.organizations.get(t))==null?void 0:e.name)!=null?n:t}},{title:"\uB0B4\uC120\uBC88\uD638",field:"ctiExtension",headerHozAlign:"center",hozAlign:"center"},{title:"\uC0C1\uB2F4\uC0AC\uBA85",field:"userName",headerHozAlign:"center",hozAlign:"center"},{title:"\uBC1C\uD589\uD2F0\uCF13\uC218",field:"totalTicketCount",headerHozAlign:"center",hozAlign:"center"},{title:"\uBBF8\uCC98\uB9AC\uD2F0\uCF13\uC218",field:"unprocessedTicketCount",headerHozAlign:"center",hozAlign:"center"},{title:"\uCC98\uB9AC\uC911\uD2F0\uCF13\uC218",field:"inProcessTicketCount",headerHozAlign:"center",hozAlign:"center"},{title:"\uC644\uB8CC\uD2F0\uCF13\uC218",field:"completedTicketCount",headerHozAlign:"center",hozAlign:"center"},{title:"\uCC98\uB9AC\uC728",field:"processingRate",headerHozAlign:"center",hozAlign:"center",formatter:function(o){const t=o.getData();return(t.completedTicketCount/t.totalTicketCount*100).toFixed(1)+"%"}},{title:"\uC774\uAD00\uD2F0\uCF13\uC218",field:"transmitTicketCount",headerHozAlign:"center",hozAlign:"center"}],h=m(new Date(new Date().setMonth(new Date().getMonth()-1))),A=m(new Date),z=i({fromDate:h,toDate:A});F(()=>{_()});function m(o){const t=new Date(o);let e=""+(t.getMonth()+1),n=""+t.getDate();const w=t.getFullYear();return e.length<2&&(e="0"+e),n.length<2&&(n="0"+n),[w,e,n].join("-")}function d(o){if(!p.value){H("\uC0C1\uB2F4\uC0AC\uBCC4 \uD1B5\uACC4 \uC870\uD68C \uAD8C\uD55C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}r.value=!0,C.getStatisticsByUsers(o).then(t=>{c.value=t.data}).catch(t=>{y(t)}).finally(()=>{r.value=!1})}function _(){d(z.value)}function D(){s.value.excelDownload(q)}return(o,t)=>(U(),V("div",M,[u("div",L,[a(E,{onSearch:d,onExcelDownload:D})]),u("div",b,[a(T,{title:"\uC0C1\uB2F4\uC0AC\uBCC4 \uD2F0\uCF13 \uD1B5\uACC4",class:"col-auto full-width q-mb-xs"}),a(S,{rows:c.value,columns:f,class:"col",ref_key:"grid",ref:s},null,8,["rows"])]),a(R,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},null,8,["modelValue"])]))}};export{wt as default};
