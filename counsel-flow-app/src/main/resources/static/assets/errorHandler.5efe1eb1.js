import{s}from"./dialog.88ce899f.js";import{d as M,r as c,g as r,_ as N}from"./index.02f7c95d.js";import{u as i}from"./authStore.fadf8446.js";import{channel as b,counselHub as I}from"./counsel-hub.145170b4.js";const T=Object.freeze({CALL_CONSULT:{name:"CALL_CONSULT",label:"\uC804\uD654\uC0C1\uB2F4"},CHAT_CONSULT:{name:"CHAT_CONSULT",label:"\uCC44\uD305\uC0C1\uB2F4"},TASK_MANAGE:{name:"TASK_MANAGE",label:"\uC5C5\uBB34 \uAD00\uB9AC"},TICKET_MANAGE:{name:"TICKET_MANAGE",label:"\uD2F0\uCF13 \uAD00\uB9AC"},CONSULT_TYPE_MANAGE:{name:"CONSULT_TYPE_MANAGE",label:"\uC0C1\uB2F4\uC720\uD615 \uAD00\uB9AC"},MISSED_CALL_MANAGE:{name:"MISSED_CALL_MANAGE",label:"\uD638\uB193\uCE68 \uAD00\uB9AC"},BOARD_MANAGE:{name:"BOARD_MANAGE",label:"\uAC8C\uC2DC\uD310 \uAD00\uB9AC"},BOARD:{name:"BOARD",label:"\uAC8C\uC2DC\uD310"},BOARD_SETTINGS:{name:"BOARD_SETTINGS",label:"\uAC8C\uC2DC\uD310 \uC124\uC815"},SETTINGS:{name:"SETTINGS_MENU",label:"\uC124\uC815"},USER_MANAGE:{name:"USER_MANAGEMENT",label:"\uC0AC\uC6A9\uC790 \uAD00\uB9AC"},PERMISSION_MANAGE:{name:"AUTH_ROLE_MANAGEMENT",label:"\uAD8C\uD55C \uAD00\uB9AC"},CODE_MANAGE:{name:"CODE_MANAGEMENT",label:"\uCF54\uB4DC \uAD00\uB9AC"},NOTICE:{name:"NOTICE",label:"\uACF5\uC9C0\uC0AC\uD56D"},ORG_MANAGE:{name:"ORGANIZATION_MANAGEMENT",label:"\uC870\uC9C1 \uAD00\uB9AC"},PROFILE_MANAGE:{name:"PROFILE_MANAGE",label:"\uD504\uB85C\uD544 \uAD00\uB9AC"},MENU_MANAGE:{name:"MENU_MANAGEMENT",label:"\uBA54\uB274 \uAD00\uB9AC"},SYSTEM_VARIABLE_MANAGE:{name:"VARIABLE_MANAGEMENT",label:"\uC2DC\uC2A4\uD15C\uBCC0\uC218 \uAD00\uB9AC"},COMPANY_MANAGE:{name:"COMPANY_MANAGE",label:"\uC5C5\uCCB4 \uAD00\uB9AC"},STATISTICS_BY_COUNSEL_TYPES:{name:"STATISTICS_BY_COUNSEL_TYPES",label:"\uC0C1\uB2F4\uC720\uD615\uBCC4 \uD2F0\uCF13\uD1B5\uACC4"},STATISTICS_BY_USERS:{name:"STATISTICS_BY_USERS",label:"\uC0C1\uB2F4\uC0AC\uBCC4 \uD2F0\uCF13\uD1B5\uACC4"},CALLBACK_MANAGE:{name:"CALLBACK_MANAGE",label:"\uCF5C\uBC31 \uAD00\uB9AC"},NOTIFICATION_MANAGE:{name:"NOTIFICATION_MANAGE",label:"\uC54C\uB9BC \uAD00\uB9AC"},ACCESS_LOG_MANAGEMENT:{name:"ACCESS_LOG_MANAGEMENT",label:"\uC811\uC18D\uB85C\uADF8 \uAD00\uB9AC"},MESSAGE_MANAGE:{name:"MESSAGE_MANAGE",label:"\uCABD\uC9C0 \uAD00\uB9AC"},SCRIPT_MANAGE:{name:"SCRIPT_MANAGE",label:"\uC2A4\uD06C\uB9BD\uD2B8 \uAD00\uB9AC"},SITE_LINK_MANAGE:{name:"SITE_LINK_MANAGEMENT",label:"\uC0AC\uC774\uD2B8\uB9C1\uD06C \uAD00\uB9AC"}}),C=M("mainTab",()=>{const e=c([{name:T.CALL_CONSULT.name,label:T.CALL_CONSULT.label}]),o=c(T.CALL_CONSULT.name),n=r(()=>e.value.map(A=>A.name));function t(A){e.value.findIndex(l=>l.name==A.name)<0&&e.value.push({name:A.name,label:A.label,lockable:!0,closable:!0}),o.value=A.name}function E(A){const a=e.value.findIndex(l=>l.name==A);a>=0&&(A==o.value&&(e.value.length===1?o.value=null:a===e.value.length-1?o.value=e.value[a-1].name:o.value=e.value[a+1].name),e.value.splice(a,1))}function u(){const A=e.value.findIndex(a=>a.name==o.value);if(!e.value[A].locked&&e.value[A].closable){let a=null;for(let l=A-1;l>=0;l--)if(e.value[l].locked||!e.value[l].closable){a=e.value[l].name;break}if(a==null){for(let l=A+1;l<e.value.length;l++)if(e.value[l].locked||!e.value[l].closable){a=e.value[l].name;break}}o.value=a}for(let a=e.value.length-1;a>=0;a--)!e.value[a].locked&&e.value[a].closable&&e.value.splice(a,1)}return{tabs:e,activeTab:o,cachedTabs:n,addTab:t,closeTab:E,closeAll:u}}),_=C(),m=i();let S=!1;async function L(e){if(e.response)switch(e.response.status){case 400:s(e.response.data.message||"\uC798\uBABB\uB41C \uC694\uCCAD\uC785\uB2C8\uB2E4.");break;case 401:if(!S)if(S=!0,await s("\uB85C\uADF8\uC778 \uD1A0\uD070\uC774 \uB9CC\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694."),b.connected){let o="";I.logout([CounselFlowHubVoiceType.IPRON_V5],o).then(()=>{console.log("[SoftPhone] #\uB85C\uADF8\uC544\uC6C3 \uC131\uACF5"),I.disconnect(o).then(()=>{console.log("[SoftPhone] #\uC811\uC18D\uD574\uC81C \uC131\uACF5")})}).catch(n=>{console.log("[SoftPhone] #\uC624\uB958 \uBC1C\uC0DD : ",n),s(VoiceCommonCode.GetCounselFlowHubErrorMessage(n))}).finally(()=>{m.logout();const n=localStorage.getItem("saveId"),t=localStorage.getItem("savedUserId"),E=localStorage.getItem("saveCTI");localStorage.clear(),_.closeAll(),n==="true"&&(localStorage.setItem("saveId",n),localStorage.setItem("savedUserId",t)),E==="true"&&localStorage.setItem("saveCTI",E),N.push({name:"login"}),setTimeout(()=>{S=!1},5e3)})}else{m.logout();const o=localStorage.getItem("saveId"),n=localStorage.getItem("savedUserId"),t=localStorage.getItem("saveCTI");localStorage.clear(),_.closeAll(),o==="true"&&(localStorage.setItem("saveId",o),localStorage.setItem("savedUserId",n)),t==="true"&&localStorage.setItem("saveCTI",t),N.push({name:"login"}),setTimeout(()=>{S=!1},5e3)}break;case 403:s("\uC811\uADFC \uAD8C\uD55C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");break;default:s("\uC608\uC0C1\uCE58 \uBABB\uD55C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}else s("\uC11C\uBC84\uC640 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uB124\uD2B8\uC6CC\uD06C \uC0C1\uD0DC\uB97C \uD655\uC778\uD558\uC138\uC694.");console.log(e)}export{T as M,L as h,C as u};
