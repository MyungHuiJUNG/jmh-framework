import{Q as x}from"./QBadge.c1f4e948.js";import{r as p,o as a,c as v,w as y,F as S,a as i,z as t,Y as _,a0 as f,Z as A,a1 as O,Q as z}from"./index.02f7c95d.js";import F from"./ATitleBar.bbf1d9a4.js";import w from"./ABtn.e24d7e8a.js";import h from"./AInput.398f059b.js";import H from"./ATextarea.94103f28.js";import{u as K}from"./use-quasar.2d4ce40a.js";import{u as B}from"./use-dialog-plugin-component.234e0905.js";import{n as W}from"./notificationApi.e49dbc1e.js";import{h as Y}from"./errorHandler.5efe1eb1.js";import Z from"./UserPopup.4dc2e487.js";import{s as g}from"./dialog.88ce899f.js";import{_ as G}from"./_plugin-vue_export-helper.cdc0426e.js";import"./ClosePopup.daa62b28.js";/* empty css                                                             *//* empty css                                                                  */import"./axios.816e1a60.js";import"./header.10137493.js";import"./authStore.fadf8446.js";import"./counsel-hub.145170b4.js";import"./TabulatorGrid.9c80b09d.js";import"./ACheckbox.923db872.js";import"./ASelect.a02a29e0.js";import"./QItem.1bce08e7.js";import"./QSelect.b17c746f.js";import"./QMenu.3c9cf304.js";import"./position-engine.53490cc8.js";import"./rtl.276c3f1b.js";import"./format.2cae61da.js";import"./organizationStore.a86bd6ff.js";import"./userApi.abe7b8c8.js";import"./ALoadingSpinner.ca275fb8.js";import"./CommonPopup.2b0ee10b.js";const J={class:"col column full-width q-pa-xs"},L={class:"col-auto row full-width fixed-height"},X={class:"col-auto t-column text-left top-border-left q-px-xs column justify-center"},ee={key:0,class:"row"},te={key:1,class:"row"},oe={class:"col top-border-right justify-center column q-px-xs"},le={key:0,class:"row justify-between"},se={key:1,class:"row"},ae={class:"col-auto row fixed-height full-width"},re={class:"col-auto t-column text-left body-border-left q-px-xs column justify-center"},ie={class:"row"},ne={class:"col body-border-right justify-center text-center column q-px-xs"},ue={class:"col row full-width"},de={class:"col-auto t-column text-left body-border-left q-px-xs column justify-center full-height"},ce={class:"row"},me={class:"col body-border-right q-pa-xs no-wrap text-no-wrap full-height"},pe={class:"col-auto full-width text-right bg-grey-5 a-border q-pa-xs no-wrap q-mt-xs"},fe={__name:"NotificationMessagePopup",props:{componentType:{type:String,default:"write"},data:{}},emits:["close","callback",...B.emits],setup(D,{emit:ve}){var k,q,V,C,N,$;const r=D,{dialogRef:I,onDialogOK:Q,onDialogHide:ye}=B(),R=K(),l=p(r.componentType),d=p(((k=r.data)==null?void 0:k.title)||null),n=p(((q=r.data)==null?void 0:q.message)||null),c=p([]),m=p(),b=p(`${(C=(V=r.data)==null?void 0:V.sender)==null?void 0:C.name} [${($=(N=r.data)==null?void 0:N.sender)==null?void 0:$.id}]`||null);function U(){d.value=null,n.value=null,c.value=[],m.value=null}function E(){if(!c.value.length){g("\uBC1B\uB294\uC0AC\uB78C\uC744 \uC9C0\uC815\uD574\uC8FC\uC138\uC694.");return}if(!d.value){g("\uC81C\uBAA9\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}if(!n.value){g("\uB0B4\uC6A9\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}const u={receiverEntityIds:c.value,entity:{title:d.value,message:n.value}};W.sendMessage(u).then(e=>{e.status===200&&(g("\uBC1C\uC1A1\uC744 \uC644\uB8CC\uD588\uC2B5\uB2C8\uB2E4."),U(),Q())}).catch(e=>{Y(e)})}function M(){R.dialog({component:Z,componentProps:{selectableRows:!0,selectableRowsRangeMode:"click",enableRowDblClick:!0}}).onOk(u=>{m.value=[],c.value=[];let e=[];u.payload.forEach(s=>{c.value.push(s.entityId),e.push(s.name+` [${s.id}]`)}),m.value=e.toString()})}function T(){var u,e,s,o,P,j;l.value="write",m.value=`${(e=(u=r.data)==null?void 0:u.sender)==null?void 0:e.name} [${(o=(s=r.data)==null?void 0:s.sender)==null?void 0:o.id}]`,c.value=[`${(j=(P=r.data)==null?void 0:P.sender)==null?void 0:j.entityId}`],d.value=null,n.value=null}return(u,e)=>(a(),v(S,{ref_key:"dialogRef",ref:I,"no-backdrop-dismiss":"","transition-show":"fade","transition-hide":"fade",class:"column no-wrap"},{default:y(()=>[i(z,{class:"dialog-large column no-wrap fit"},{default:y(()=>{var s;return[i(F,{title:l.value==="write"?"\uCABD\uC9C0 \uBCF4\uB0B4\uAE30":"\uBC1B\uC740 \uCABD\uC9C0",close:!0,class:"col-auto full-width"},null,8,["title"]),t("div",J,[t("div",L,[t("div",X,[l.value==="write"?(a(),_("div",ee,[i(x,{class:"q-pa-none q-mr-xs",color:"grey-2","text-color":"red"},{default:y(()=>e[4]||(e[4]=[f("*")])),_:1}),e[5]||(e[5]=f("\uBC1B\uB294\uC0AC\uB78C "))])):(a(),_("div",te,"\uBCF4\uB0B8\uC0AC\uB78C"))]),t("div",oe,[l.value==="write"?(a(),_("div",le,[i(h,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),readonly:"",class:"col"},null,8,["modelValue"]),i(w,{icon:"search",onClick:M,class:"col-auto q-ml-xs"})])):(a(),_("div",se,[i(h,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=o=>b.value=o),readonly:"",class:"col"},null,8,["modelValue"])]))])]),t("div",ae,[t("div",re,[t("div",ie,[l.value==="write"?(a(),v(x,{key:0,class:"q-pa-none q-mr-xs",color:"grey-2","text-color":"red"},{default:y(()=>e[6]||(e[6]=[f("*")])),_:1})):A("",!0),e[7]||(e[7]=f("\uC81C\uBAA9 "))])]),t("div",ne,[i(h,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),readonly:l.value==="read"},null,8,["modelValue","readonly"])])]),t("div",ue,[t("div",de,[t("div",ce,[l.value==="write"?(a(),v(x,{key:0,class:"q-pa-none q-mr-xs",color:"grey-2","text-color":"red"},{default:y(()=>e[8]||(e[8]=[f("*")])),_:1})):A("",!0),e[9]||(e[9]=f("\uB0B4\uC6A9 ")),e[10]||(e[10]=t("br",null,null,-1)),t("span",null,"("+O(((s=n.value)==null?void 0:s.length)||0)+" / 5000\uC790)",1)])]),t("div",me,[i(H,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=o=>n.value=o),class:"col fit",height:"100%",readonly:l.value==="read",maxlength:"5000"},null,8,["modelValue","readonly"])])]),t("div",pe,[l.value==="write"?(a(),v(w,{key:0,label:"\uC804\uC1A1",class:"q-ml-xs",onClick:E})):(a(),v(w,{key:1,label:"\uB2F5\uC7A5",class:"q-ml-xs",onClick:T}))])])]}),_:1})]),_:1},512))}},Ge=G(fe,[["__scopeId","data-v-ab8488e9"]]);export{Ge as default};
