import{r as I,y as K,u as G,o as c,c as i,w as S,B as j,F as z,a as g,z as l,a1 as p,$ as r,E as q,Q as M}from"./index.02f7c95d.js";import m from"./AIconBtn.b6a23ac8.js";import{u as B}from"./use-dialog-plugin-component.234e0905.js";import{c as $}from"./customerInfoApi.4e3b1586.js";import{u as J}from"./codeStore.e69f9e04.js";import{_ as W}from"./_plugin-vue_export-helper.cdc0426e.js";import"./axios.816e1a60.js";import"./header.10137493.js";const X={class:"col-7 column q-pa-xl full-height"},Y={class:"full-width col column q-pa-lg bg-grey-2 no-wrap border-radius-10"},Z={class:"col-auto row items-center full-width"},ll={class:"name q-mr-xl"},ol={class:"tel"},el={class:"row q-mt-sm col full-width"},nl={class:"col row items-center full-height"},al={class:"note fit"},tl={class:"col-auto row items-center justify-end full-height"},sl={class:"col-auto q-mt-sm text-right full-width"},cl={__name:"CallInLayerPop2",props:["signalInfo"],emits:[...B.emits],setup(t,{emit:il}){const u=J(),d=t,{dialogRef:D,onDialogOK:P,onDialogCancel:rl,onDialogHide:V}=B(),h=CounselFlowHubVoiceCode.CallType.TRANSFER,C=CounselFlowHubVoiceCode.CallType.CONSULT,_=I("\uBBF8\uC778\uC99D\uACE0\uAC1D"),n=I(),y=I(),F=u.codes.get("GENERAL").code,O=u.codes.get("VIP").code,U=u.codes.get("CAUTION").code;K(()=>{Q()}),G(()=>{console.log("unmounted")});function Q(){if(d.signalInfo.channelInfo.callInfo.callType===C)return;let a=null;if(d.signalInfo.channelInfo.callInfo.callType===h?a=d.signalInfo.channelInfo.callInfo.xferCallerId:a=d.signalInfo.channelInfo.callInfo.callerId,!a)return;const o={};o.searchTel=a,$.getCustomerInfos(o).then(s=>{if(s.status===200){const e=s.data;e.length&&(e[0].name&&(_.value=e[0].name),e[0].customerTypeCode&&(n.value=e[0].customerTypeCode),e[0].note&&(y.value=e[0].note))}})}function f(a){var o;return((o=u.codes.get(a))==null?void 0:o.name)||a}function v(){P()}function H(){V()}return(a,o)=>(c(),i(z,{ref_key:"dialogRef",ref:D,persistent:"","transition-show":"fade","transition-hide":"fade",class:"row",onKeyup:j(v,["enter"])},{default:S(()=>[g(M,{class:"dialog-body row col-auto"},{default:S(()=>{var s,e,w,b,T,k,N,x,A,R,E,L;return[o[2]||(o[2]=l("div",{class:"col-5 full-height"},null,-1)),l("div",X,[o[0]||(o[0]=l("div",{class:"col-2 full-width"},null,-1)),l("div",Y,[l("div",Z,[l("span",ll,p(((w=(e=(s=t.signalInfo)==null?void 0:s.channelInfo)==null?void 0:e.callInfo)==null?void 0:w.callType)===r(C)?"\uD611\uC758 \uC804\uD654":_.value),1),l("span",ol,p(((k=(T=(b=t.signalInfo)==null?void 0:b.channelInfo)==null?void 0:T.callInfo)==null?void 0:k.callType)===r(h)?(A=(x=(N=t.signalInfo)==null?void 0:N.channelInfo)==null?void 0:x.callInfo)==null?void 0:A.xferCallerId:(L=(E=(R=t.signalInfo)==null?void 0:R.channelInfo)==null?void 0:E.callInfo)==null?void 0:L.callerId),1)]),l("div",el,[l("div",nl,[l("span",al,p(y.value),1)]),l("div",tl,[n.value===r(F)?(c(),i(m,{key:0,label:f(n.value),icon:"mood"},null,8,["label"])):n.value===r(U)?(c(),i(m,{key:1,label:f(n.value),icon:"warning"},null,8,["label"])):n.value===r(O)?(c(),i(m,{key:2,label:f(n.value),icon:"stars"},null,8,["label"])):(c(),i(m,{key:3,label:f(n.value),icon:"mood"},null,8,["label"]))])]),l("div",sl,[g(q,{icon:"call",label:"Click to Answer",onClick:v,color:"primary"}),g(q,{label:"\uAC70\uC808",onClick:H,color:"primary",class:"q-ml-sm"})])]),o[1]||(o[1]=l("div",{class:"col-2 full-width"},null,-1))])]}),_:1})]),_:1},512))}},Cl=W(cl,[["__scopeId","data-v-2d1cb3b9"]]);export{Cl as default};
