import{d as E}from"./index.02f7c95d.js";import{api as c}from"./axios.816e1a60.js";import{g as C}from"./header.10137493.js";const h=Object.freeze({IvrDnCode:{SEXUAL:"4013",CURSE:"4014",AGREE:"4011",CARD:"16668820",MOBILE:"01030250009",CENTER:"4015",BIRTHDAY:"4012",SOCIAL:"4010",PERSONAL_INFO:"4017"},LeaveSubStateCodeName:{REST:"\uD734\uC2DD",MEAL:"\uC2DD\uC0AC",EDU:"\uAD50\uC721",WORK:"\uD0C0\uC5C5\uBB34"},LeaveSubStateCode:{REST:"0",MEAL:"1",EDU:"2",WORK:"3"},StateCodeName:{NOTLOGIN:"OFF",READY:"\uB300\uAE30",ABSENCE:"\uC774\uC11D",PROCESS:"\uD1B5\uD654\uC885\uB8CC",RINGBACK:"\uB2E4\uC774\uC5BC\uC911",OFFERING:"\uBCA8\uC6B8\uB9BC",BUSY:"BUSY",ACTIVE:"\uD1B5\uD654\uC911",HELD:"\uBCF4\uB958\uC911",MISS:"\uD638\uB193\uCE68",LOGIN:"\uB85C\uADF8\uC778"},StateBarColor:{WHITE:"#818181",PINK:"#b92d2d",BLUE:"#007cc4"},CtiServerInfo:{APPNAME:"CounselFlowApp",PROTOCOL:"https",ACTIVESERVER:"100.100.107.147",ACTIVEPORT:"9203",STANDBYSERVER:"100.100.107.147",STANDBYPORT:"9203",TENANT:"\uAE30\uBCF8\uD14C\uB10C\uD2B8"},GetCounselFlowHubErrorMessage(t){return t.original?(console.log("[Original Code] ",t.original),this.CounselFlowHubErrorCode[t.code]+"(O-Code : "+t.original.code+", Method : "+t.original.method+")"):(console.log("[Ex Code] ",t),t.code==="9999"?this.CounselFlowHubErrorCode[t.code]+"(Code : "+t.code+")":this.CounselFlowHubErrorCode[t.code])},CounselFlowHubErrorCode:{1001:"\uB85C\uADF8\uC778\uC5D0 \uC2E4\uD328\uD558\uC600\uC2B5\uB2C8\uB2E4.(Code:2001)",1002:"\uC774\uBBF8 \uB85C\uADF8\uC778 \uB418\uC5B4\uC788\uC2B5\uB2C8\uB2E4.(VCode:1002)",1003:"\uC774\uBBF8 \uB85C\uADF8\uC778\uC744 \uC2DC\uB3C4\uC911\uC785\uB2C8\uB2E4.(VCode:1003)",1004:"\uC798\uBABB\uB41C AGENT/TENANT \uC544\uC774\uB514\uC785\uB2C8\uB2E4.(Code:2110)",1005:"\uC798\uBABB\uB41C \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4.(Code:2502)",1006:"\uB2E4\uB978 \uC0AC\uC6A9\uC790\uAC00 \uC774 \uB0B4\uC120\uBC88\uD638\uB97C \uC0AC\uC6A9\uC911\uC785\uB2C8\uB2E4.(VCode:1006)",2001:"\uCC44\uB110\uC5D0 \uB85C\uADF8\uC778 \uB418\uC5B4\uC788\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.(VCode:2001)",2002:"\uCC44\uB110\uC0C1\uD0DC\uAC00 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.(Code:2402)",2003:"\uB0B4\uC120\uBC88\uD638\uAC00 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.(Code:2101)",2004:"invalid destinated state(VCode:2004)",2005:"invalid destinated number(VCode:2005)",2006:"\uC5D0\uC774\uC83C\uD2B8 \uC11C\uBE44\uC2A4\uAC00 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.(VCode:2006)",2007:"\uB9E4\uAC1C\uBCC0\uC218\uAC00 \uC798\uBABB\uB418\uC5C8\uC2B5\uB2C8\uB2E4.(VCode:2007)",3001:"\uD1B5\uD654\uC0C1\uD0DC\uAC00 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.(Code:2405)",4001:"\uB2E4\uB978 \uBA85\uB839\uC744 \uC2E4\uD589\uC911\uC785\uB2C8\uB2E4.(VCode:4001)",5001:"\uC2E4\uD589\uC744 \uC704\uD55C \uB9AC\uC18C\uC2A4\uAC00 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.(VCode:5001)",5002:"\uC804\uD658\uC744 \uC704\uD55C \uCF5C \uC815\uBCF4\uAC00 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.(VCode:5002)",9997:"\uC11C\uBC84\uC5F0\uACB0 \uC624\uB958(VCode:9997)",9998:"\uD0C0\uC784\uC544\uC6C3 \uC624\uB958(VCode:9998)",9999:"\uC815\uC758\uB418\uC9C0 \uC54A\uC740 \uC5D0\uB7EC\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."}}),m=(t,e)=>{let a=t?`/rest/api/v1/settings/system/variable/variables/${t}`:"/rest/api/v1/settings/system/variable/variables";return typeof e!="undefined"&&(a+=`?isTopCode=${e}`),c.get(a,C())},y=(t,e)=>c.put(`/rest/api/v1/settings/system/variable/variables/${t}`,e,{...C(),"Content-Type":"application/json"}),f={getSystemVariable:m,putSystemVariable:y},A=E("systemVariableStore",{state:()=>({systemVariables:new Map,systemVariableArray:[],recid:1,ctiServerInfo:h.CtiServerInfo,initialLoaded:!1}),getters:{getSystemVariable:t=>(e,a)=>{if(!e)return null;let i=Array.isArray(e)?e:e.children;return i!=null&&i.length&&i.find(r=>r.entityId===a)||null},getSystemVariableName:t=>(e,a)=>{if(!e)return null;let i=Array.isArray(e)?e:e.children;if(!(i!=null&&i.length))return null;const r=i.find(s=>s.entityId===a);return r?r.displayName:null},getSystemVariableByEntityId:t=>(e,a)=>{if(!e)return null;let i=Array.isArray(e)?e:e.children;return i!=null&&i.length&&i.find(r=>r.entityId===a)||null},getChildrenSystemVariablesByTopParentEntityIdValue:t=>e=>{const a=t.systemVariables.get(e);return(a==null?void 0:a.children)||[]},getChildrenSystemVariableNamesByTopParentEntityIdValue:t=>e=>{var i;const a=t.systemVariables.get(e);return((i=a==null?void 0:a.children)==null?void 0:i.map(r=>r.displayName))||[]},findSystemVariablesInTopParentEntityIdValue:t=>(e,a,i)=>{function r(d,l,u){!(l!=null&&l.children)||l.children.forEach(o=>{o.entityId===u&&d.push(o),r(d,o,u)})}const s=[],n=t.systemVariables.get(e);return n&&r(s,n,a),i?s[0]||null:s},findSystemVariableNamesInTopParentEntityIdValue:t=>(e,a,i)=>{function r(d,l,u){!(l!=null&&l.children)||l.children.forEach(o=>{o.entityId===u&&d.push(o.displayName),r(d,o,u)})}const s=[],n=t.systemVariables.get(e);return n&&r(s,n,a),i?s[0]||null:s},findParentSystemVariableByChildren:t=>e=>{if(!(e!=null&&e.parentEntityId))return t.systemVariableArray;let a=null;function i(r){r.forEach(s=>{var n;e.parentEntityId===s.entityId?a=s.children||[]:(n=s.children)!=null&&n.length&&i(s.children)})}return i(t.systemVariableArray),a||t.systemVariableArray},findParentEntityId:t=>e=>{if(!(e!=null&&e.parentEntityId))return null;let a=null;function i(r){r.forEach(s=>{e.parentEntityId===s.entityId?a=s:s.children&&s.children.length>0&&i(s.children)})}return i(t.systemVariableArray),a},findIndexInParentSystemVariableChildren:t=>(e,a)=>e.findIndex(i=>i.entityId===a.entityId)},actions:{setSystemVariables(t){var e,a,i,r,s,n,d;this.systemVariables=new Map,t.forEach(l=>{var u;(u=l.children)!=null&&u.length&&l.children.sort((o,S)=>o.displayName.localeCompare(S.displayName)),this.systemVariables.set(l.entityId,l)}),this.ctiServerInfo={APPNAME:((e=this.systemVariables.get("cti-server-app-name"))==null?void 0:e.value)||h.CtiServerInfo.APPNAME,PROTOCOL:((a=this.systemVariables.get("cti-server-protocol"))==null?void 0:a.value)||h.CtiServerInfo.PROTOCOL,ACTIVESERVER:((i=this.systemVariables.get("cti-server-active-host"))==null?void 0:i.value)||h.CtiServerInfo.ACTIVESERVER,ACTIVEPORT:((r=this.systemVariables.get("cti-server-active-port"))==null?void 0:r.value)||h.CtiServerInfo.ACTIVEPORT,STANDBYSERVER:((s=this.systemVariables.get("cti-server-standby-host"))==null?void 0:s.value)||h.CtiServerInfo.STANDBYSERVER,STANDBYPORT:((n=this.systemVariables.get("cti-server-standby-port"))==null?void 0:n.value)||h.CtiServerInfo.STANDBYPORT,TENANT:((d=this.systemVariables.get("cti-server-tenant-name"))==null?void 0:d.value)||h.CtiServerInfo.TENANT}},setSystemVariableArray(t){this.recid=1;const e=(a,i)=>{a.sort((r,s)=>r.displayName.localeCompare(s.displayName)),a.forEach(r=>{var s;r.recid=this.recid++,i&&(r.parentEntityId=i.entityId,r.parentRecid=i.recid,r.prevParentEntityId=i.entityId),(s=r.children)!=null&&s.length&&e(r.children,r)})};this.systemVariableArray=t,e(this.systemVariableArray)},load(){f.getSystemVariable(null,!1).then(t=>{t.status===200&&this.setSystemVariables(t.data)}).catch(t=>{console.log(t)}),f.getSystemVariable(null).then(t=>{t.status===200&&this.setSystemVariableArray(t.data)}).catch(t=>{console.log(t)})},fetchInitialData(){return this.initialLoaded?Promise.resolve():(this.initialLoaded=!0,Promise.all([f.getSystemVariable(null,!1),f.getSystemVariable(null)]).then(([t,e])=>{this.setSystemVariables(t.data),this.setSystemVariableArray(e.data)}).catch(t=>{throw this.initialLoaded=!1,t}))},clearInitialData(){this.initialLoaded=!1,this.clear()},clear(){this.setSystemVariables([]),this.setSystemVariableArray([])},async update(t){try{const e=await f.updateMultipleSystemVariable(t);return e.status===200&&this.load(),e}catch(e){throw console.log(e),e}}}});export{h as V,f as s,A as u};
